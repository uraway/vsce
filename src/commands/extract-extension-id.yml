description: |
  Extract and set EXTENSION_ID from package.json
parameters:
  package-path:
    default: "."
    description: |
      Root directory of your extension
    type: string
steps:
  - run:
      name: Install jq
      command: sudo apt-get install jq
  - run:
      name: Extract and set EXTENSION_ID
      working_directory: << parameters.package-path >>
      command: |
        PUBLISHER=$(cat package.json | jq -r '.publisher')
        NAME=$(cat package.json | jq -r '.name')
        echo 'EXTENSION_ID=$PUBLISHER.$NAME' >> $BASH_ENV
